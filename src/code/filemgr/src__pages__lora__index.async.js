"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[945],{88770:function(x,c,u){u.d(c,{R:function(){return r},Y:function(){return d}});var F=u(33009),o=u(15009),l=u.n(o),A=u(99289),C=u.n(A),v=u(5574),i=u.n(v),B=u(19425),m=u(85504),_=u(42075),D=u(71577),e=u(62435),t=u(86074);function a(n){var R=n.local,L=n.remote,U=n.name,E=e.useState(!1),I=i()(E,2),M=I[0],p=I[1],O=e.useContext(m._);return(0,t.jsxs)(_.Z,{direction:"vertical",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:"\u5F53\u524D\u7248\u672C"})," ",(0,t.jsx)("span",{children:R})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:"\u6700\u65B0\u7248\u672C"})," ",(0,t.jsx)("span",{children:L})]}),(0,t.jsxs)("div",{children:["\u4E3A\u4E86\u66F4\u597D\u7684\u4F7F\u7528\u4F53\u9A8C\uFF0C\u5EFA\u8BAE\u60A8\u5728\u9002\u5F53\u65F6\u95F4\u8FDB\u884C\u66F4\u65B0\u3002\u66F4\u65B0\u8FC7\u7A0B\u4F1A\u5728",(0,t.jsx)("code",{children:"/mnt/auto"})," \u76EE\u5F55\u521B\u5EFA\u7F13\u5B58\u76EE\u5F55\uFF0C\u66F4\u65B0\u5B8C\u6210\u540E\u53EF\u624B\u52A8\u5220\u9664\u3002"]}),(0,t.jsx)(D.ZP,{type:"primary",loading:M,onClick:C()(l()().mark(function j(){var s;return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return p(!0),f.next=3,(U==="filemgr"?B.D:B.a)(L);case 3:if(s=f.sent,s.success){f.next=8;break}F.Z.error({message:"\u66F4\u65B0\u5931\u8D25",description:"\u8BF7\u52A0\u9489\u9489\u7FA4 29290019867 \u5BFB\u6C42\u5E2E\u52A9\uFF0C\u9519\u8BEF\u65E5\u5FD7\uFF1A".concat(s.errMsg)}),f.next=12;break;case 8:return F.Z.success({message:"\u66F4\u65B0\u6210\u529F",description:"5 \u79D2\u540E\u81EA\u52A8\u5237\u65B0\u9875\u9762"}),f.next=11,new Promise(function(W){return setTimeout(W,5e3)});case 11:window.location.reload();case 12:p(!1);case 13:case"end":return f.stop()}},j)})),children:"\u4E00\u952E\u66F4\u65B0"})]})}function d(n){(n==null?void 0:n.filemgrLocal)!==(n==null?void 0:n.filemgrRemote)&&F.Z.info({duration:10,message:"\u53D1\u73B0\u65B0\u7248\u672C\u6587\u4EF6\u7BA1\u7406\u5668",description:(0,t.jsx)(a,{local:(n==null?void 0:n.filemgrLocal)||"",remote:(n==null?void 0:n.filemgrRemote)||"",name:"filemgr"})})}function r(n){n!=null&&n.loraVersionLocal&&(n==null?void 0:n.loraVersionLocal)!==(n==null?void 0:n.loraVersionRemote)&&F.Z.info({duration:10,message:"\u53D1\u73B0\u65B0\u7248\u672C Lora \u8BAD\u7EC3\u529F\u80FD",description:(0,t.jsx)(a,{local:(n==null?void 0:n.loraVersionLocal)||"",remote:(n==null?void 0:n.loraVersionRemote)||"",name:"lora"})})}},25973:function(x,c,u){u.d(c,{h:function(){return m}});var F=u(97857),o=u.n(F),l=u(5574),A=u.n(l),C=u(21687),v=u(62435),i=u(86074);function B(_,D){var e=_.src,t=_.style,a=_.extra,d=(0,v.useState)(!0),r=A()(d,2),n=r[0],R=r[1];return v.useEffect(function(){R(!0)},[e]),(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsxs)("div",{style:{padding:20,color:"#666"},children:[(0,i.jsx)(C.Z,{loading:!0,active:!0}),a]}),(0,i.jsx)("iframe",{ref:D,src:e,style:o()(o()({height:"100vh",border:"none",width:"100%",outline:"none"},t),{},{display:n?"none":"block"}),onLoad:function(){return R(!1)}})]})}var m=v.forwardRef(B)},66442:function(x,c,u){u.d(c,{f:function(){return _},k:function(){return D}});var F=u(97857),o=u.n(F),l=u(19632),A=u.n(l),C=u(5574),v=u.n(C),i=u(62435),B=u(86074),m=i.createContext({items:[],setItems:function(){}});function _(e){var t=i.useState([]),a=v()(t,2),d=a[0],r=a[1];return(0,B.jsxs)(m.Provider,{value:{items:d,setItems:r},children:[e.children,d.map(function(n){return(0,B.jsx)("div",{style:n.show?{}:{display:"none"},children:n.children},n.key)})]})}function D(e){var t=i.useContext(m);i.useEffect(function(){return t.setItems(function(a){var d=a.findIndex(function(r){return r.key===e.key});return d===-1?[].concat(A()(a),[{key:e.key,show:!0,children:e.children}]):a.map(function(r,n){return n===d?o()(o()({},r),{},{key:e.key,show:!0,children:e.children}):r})}),function(){t.setItems(function(a){var d=a.findIndex(function(r){return r.key===e.key});return d===-1?[].concat(A()(a),[{key:e.key,show:!1,children:e.children}]):a.map(function(r,n){return n===d?o()(o()({},r),{},{show:!1}):r})})}},[t.setItems,e.children,e.key])}},30513:function(x,c,u){u.r(c),u.d(c,{default:function(){return I}});var F=u(15009),o=u.n(F),l=u(99289),A=u.n(l),C=u(5574),v=u.n(C),i=u(88770),B=u(25973),m=u(66442),_=u(55617),D=u(19425),e=u(85504),t=u(83204),a=u(69637),d=u(62435);function r(M){var p=d.useRef(null),O=d.useCallback(function(){var j=p==null?void 0:p.current;if(j){var s=(j==null?void 0:j.getBoundingClientRect())||{},y=s.top,f=y===void 0?0:y;j.style.height="calc(100vh - ".concat(f+(M||0),"px)")}},[]);return(0,t.Z)("load",O),(0,t.Z)("resize",O),d.useEffect(function(){O()},[]),(0,a.Z)(O,1e3),[p,O]}var n=u(99138),R=u(71577),L=u(36147),U=u(33009),E=u(86074);function I(){var M,p,O,j,s=d.useContext(e._),y=r(),f=v()(y,2),W=f[0],N=f[1],V=d.useState(!1),Z=v()(V,2),H=Z[0],$=Z[1],z=d.useState(!1),S=v()(z,2),Q=S[0],G=S[1],k=d.useMemo(function(){var g,P,T,h,b,K;return!(s!=null&&(g=s.info)!==null&&g!==void 0&&g.loraFunctionName)||!(s!=null&&(P=s.info)!==null&&P!==void 0&&P.serviceName)?"":"http://".concat(s==null||(T=s.info)===null||T===void 0?void 0:T.loraFunctionName,".").concat(s==null||(h=s.info)===null||h===void 0?void 0:h.serviceName,".").concat(s==null||(b=s.info)===null||b===void 0?void 0:b.accountID,".").concat(s==null||(K=s.info)===null||K===void 0?void 0:K.region,".fc.devsapp.net/")},[s==null||(M=s.info)===null||M===void 0?void 0:M.loraFunctionName,s==null||(p=s.info)===null||p===void 0?void 0:p.serviceName]);return d.useEffect(function(){(0,i.R)(s==null?void 0:s.info)},[s==null||(O=s.info)===null||O===void 0?void 0:O.loraVersionLocal,s==null||(j=s.info)===null||j===void 0?void 0:j.loraVersionRemote]),(0,_.Q4)(_.Zl.PAGE_LORA),(0,E.jsxs)(m.k,{children:[(0,E.jsx)(n.Z,{type:"warning",message:"\u6E29\u99A8\u63D0\u793A",closable:!0,onClose:function(){return setTimeout(N,1e3)},style:{margin:20},description:(0,E.jsxs)("ol",{children:[(0,E.jsxs)("li",{children:["\u57FA\u4E8E\u51FD\u6570\u8BA1\u7B97\u5B9E\u73B0\u7684 Lora \u8BAD\u7EC3\u529F\u80FD\u662F\u7531\u793E\u533A\u7528\u6237\u57FA\u4E8E"," ",(0,E.jsx)("a",{href:"https://github.com/bmaltais/kohya_ss",target:"_blank",children:"\u5F00\u6E90\u9879\u76EE kohya_ss"})," ","\u6240\u8D21\u732E\uFF0C\u4E0D\u4EE3\u8868\u963F\u91CC\u4E91\u51FD\u6570\u8BA1\u7B97\u89C2\u70B9\uFF0C\u5728\u4F7F\u7528\u8FC7\u7A0B\u4E2D\u51FA\u73B0\u4EFB\u4F55\u95EE\u9898\u6B22\u8FCE\u8054\u7CFB\u8BE5\u529F\u80FD\u4F5C\u8005\uFF0C\u6216\u8005\u5728"," ",(0,E.jsx)("a",{href:"https://github.com/bmaltais/kohya_ss/discussions",target:"_blank",children:"kohya_ss \u793E\u533A\u5BFB\u6C42\u5E2E\u52A9"}),"\uFF0C\u963F\u91CC\u4E91\u51FD\u6570\u8BA1\u7B97\u4E0D\u63D0\u4F9B\u4EFB\u4F55\u8BE5\u5F00\u6E90\u9879\u76EE\u672C\u8EAB\u95EE\u9898\u7684\u89E3\u7B54"]}),(0,E.jsxs)("li",{children:["\u5F53\u524D\u529F\u80FD\u91C7\u7528\u4E86\u5F00\u6E90\u9879\u76EE"," ",(0,E.jsx)("a",{href:"https://github.com/bmaltais/kohya_ss",target:"_blank",children:"kohya_ss"})," ","\u6240\u642D\u5EFA\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u4F7F\u7528\u95E8\u69DB\u548C\u6280\u672F\u57FA\u7840\uFF0C\u4F8B\u5982\uFF1A\u5728 kohya_ss \u9875\u9762\u4E0A\u70B9\u51FB\u8BAD\u7EC3\u6309\u94AE\uFF0C\u524D\u7AEF\u9875\u9762\u6CA1\u6709\u6548\u679C\uFF0C\u9700\u8981\u67E5\u770B\u65E5\u5FD7\u6765\u5224\u65AD\u662F\u5426\u5F00\u59CB\u8BAD\u7EC3\u4EE5\u53CA\u8BAD\u7EC3\u8FDB\u5EA6\u7B49\uFF0C\u6240\u4EE5\u5F3A\u70C8\u5EFA\u8BAE\u60A8\u5728\u4E3A\u5145\u5206\u4E86\u89E3"," ","kohya_ss \u76F8\u5173\u529F\u80FD\u6216\u8005\u4F7F\u7528\u65B9\u5F0F\u65F6\u4E0D\u8981\u8F7B\u6613\u4F7F\u7528\u8BE5\u529F\u80FD"]}),(0,E.jsx)("li",{children:"\u7531\u4E8E\u6A21\u578B\u8BAD\u7EC3\u65F6\u95F4\u901A\u5E38\u6BD4\u8F83\u957F\uFF08\u4F8B\u5982\u6D4B\u8BD5\u4E2D 11 \u5F20\u7167\u7247\u8FDB\u884C Lora \u8BAD\u7EC3 1600 step \u8017\u65F6 12 \u5206\u949F\uFF09\uFF0C\u6240\u4EE5\u4F1A\u4EA7\u751F\u4E00\u5B9A\u7684\u8D39\u7528\uFF0C\u5F3A\u70C8\u5EFA\u8BAE\u60A8\u7684\u63D0\u524D\u4E86\u89E3\u51FD\u6570\u8BA1\u7B97\u7684\u8BA1\u8D39\u4EE5\u53CA\u6E05\u695A\u8BAD\u7EC3\u6A21\u578B\u53EF\u80FD\u80FD\u5E26\u6765\u66F4\u591A\u7684\u8D39\u7528\u652F\u51FA\u540E\uFF0C\u660E\u786E\u8BE5\u529F\u80FD\u7B26\u5408\u9884\u671F\u518D\u8FDB\u884C\u4F7F\u7528\uFF0C\u5426\u5219\u8BF7\u52FF\u4F7F\u7528\u8BE5\u529F\u80FD\uFF1B"}),(0,E.jsx)("li",{children:"\u5F53\u60A8\u5728\u524D\u7AEF\u70B9\u51FB\u8BAD\u7EC3\u6309\u94AE\u4E4B\u540E\uFF0C\u8BF7\u52A1\u5FC5\u901A\u8FC7\u65E5\u5FD7\u67E5\u770B\u9879\u76EE\u662F\u5426\u6B63\u5E38\u8FD0\u884C\u4EE5\u53CA\u662F\u5426\u5DF2\u7ECF\u8BAD\u7EC3\u51FA\u7ED3\u679C\uFF0C\u8BF7\u52FF\u5728\u8BAD\u7EC3\u8FC7\u7A0B\u4E2D\u591A\u6B21\u70B9\u51FB\u8BAD\u7EC3\u6309\u94AE\uFF0C\u4EE5\u9632\u6B62\u5E76\u884C\u91CD\u590D\u8BAD\u7EC3\u4EA7\u751F\u989D\u5916\u8D39\u7528\uFF0C\u4E5F\u8BF7\u52FF\u5728\u8BAD\u7EC3\u5B8C\u6210\u4E4B\u524D\u5173\u95ED\u9875\u9762\uFF0C\u5BFC\u81F4\u8FDE\u63A5\u65AD\u5F00\uFF0C\u8BAD\u7EC3\u7EC8\u6B62\uFF1B\u5728\u4F7F\u7528\u8FC7\u7A0B\u4E2D\u5982\u679C\u6709\u95EE\u9898\u4E5F\u53EF\u4EE5\u8054\u7CFB\u5F53\u524D\u529F\u80FD\u8D21\u732E\u8005\uFF08\u9489\u9489\uFF1A13500993691\uFF09\uFF1B"}),(0,E.jsx)("li",{children:(0,E.jsx)("a",{href:"https://olabc.cn/H5VI6Z5Xuj",target:"_blank",children:"\u793E\u533A\u6587\u6863 - \u57FA\u4E8E\u963F\u91CC\u4E91\u51FD\u6570\u8BA1\u7B97\u642D\u5EFA Lora \u8BAD\u7EC3\u529F\u80FD"})})]})}),k?(0,E.jsx)(B.h,{ref:W,src:k||"",extra:"\u6B63\u5728\u4E3A\u60A8\u52A0\u8F7D lora \u8BAD\u7EC3\u9875\u9762\uFF0C\u5982\u679C\u60A8\u662F\u521D\u6B21\u8FDB\u5165\u9875\u9762\u6216\u4E00\u6BB5\u65F6\u95F4\u5185\u65E0\u8BF7\u6C42\uFF0C\u52A0\u8F7D\u9875\u9762\u5B58\u5728\u51B7\u542F\u52A8\u3002\u5728\u8FD9\u4E2A\u8FC7\u7A0B\u4E2D\u670D\u52A1\u5668\u9700\u8981\u52A0\u8F7D\u6A21\u578B\u53CA\u5176\u4ED6\u4EE3\u7801\uFF0C\u8FD9\u5C06\u82B1\u8D39\u4E00\u5B9A\u7684\u65F6\u95F4\uFF08\u901A\u5E38\u800C\u8A00\uFF0C\u9700\u8981 20~40 \u79D2\uFF09\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85\u3002",style:{height:"100%"}}):(0,E.jsxs)("div",{style:{margin:20},children:[(0,E.jsx)(R.ZP,{type:"primary",onClick:function(){$(!0)},children:"\u521D\u59CB\u5316 kohya_ss \u51FD\u6570"}),(0,E.jsxs)(L.Z,{title:"\u521B\u5EFA kohya_ss \u786E\u8BA4",open:H,onOk:A()(o()().mark(function g(){var P;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return G(!0),h.next=3,(0,D.a)("");case 3:if(P=h.sent,!(P!=null&&P.success)){h.next=10;break}return h.next=7,new Promise(function(b){return setTimeout(b,1e3)});case 7:location.reload(),h.next=11;break;case 10:U.Z.error({message:"\u521B\u5EFA\u5931\u8D25",description:P==null?void 0:P.errMsg});case 11:G(!1);case 12:case"end":return h.stop()}},g)})),onCancel:function(){return $(!1)},okButtonProps:{loading:Q},destroyOnClose:!0,children:[(0,E.jsx)("p",{children:"\u70B9\u51FB\u786E\u8BA4\u540E\uFF0C\u5C06\u4F1A\u4E3A\u60A8\u521B\u5EFA kohya_ss \u51FD\u6570\uFF0C\u8BE5\u51FD\u6570\u8FD0\u884C\u4E8E GPU \u5B9E\u4F8B\uFF0C\u6267\u884C\u4F1A\u4EA7\u751F\u4E00\u5B9A\u7684\u8D39\u7528"}),(0,E.jsx)("p",{children:"\u8BE5\u529F\u80FD\u9002\u7528\u4E8E Lora \u8BAD\u7EC3\uFF0C\u57FA\u672C\u4EE3\u7801\u6765\u81EA\u4E8E\u5F00\u6E90\u793E\u533A\uFF0C\u7531 devsapp \u793E\u533A\u5F00\u53D1\u8005\u4E8C\u6B21\u4FEE\u6539\u540E\u63D0\u4F9B\uFF0C\u4E0E\u51FD\u6570\u8BA1\u7B97\u65E0\u5173\uFF0C\u5982\u679C\u5BF9\u6B64\u5B58\u5728\u7591\u95EE\u8BF7\u4E0D\u8981\u521B\u5EFA"})]})]})]},"lora")}},70507:function(x,c,u){var F=u(50942),o=u(6154);o.Z.interceptors.response.use(function(l){return l},function(l){return l.response&&(l.response.status===401&&F.m8.push("/login"),l.response.status!==200)?l.response:Promise.reject(l)}),c.Z=o.Z},55617:function(x,c,u){u.d(c,{Q4:function(){return _},Zl:function(){return i},_2:function(){return B},fX:function(){return D}});var F=u(15009),o=u.n(F),l=u(99289),A=u.n(l),C=u(62435),v=u(70507),i;(function(e){e.PAGE_INFO="page_info",e.PAGE_SD="page_sd",e.PAGE_FILEMGR="page_filemgr",e.PAGE_MODEL="page_model",e.PAGE_TERMINAL="page_terminal",e.PAGE_LORA="page_lora",e.PAGE_DOCUMENT="page_document",e.PAGE_UPLOAD="page_upload",e.CHANGE_SIDEMENU="change_sidemenu",e.TRY_MODEL="try_model",e.DOWNLOAD_MODEL="download_model",e.UPLOAD_ERROR="upload_error"})(i||(i={}));function B(e,t){return m.apply(this,arguments)}function m(){return m=A()(o()().mark(function e(t,a){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!window.ENABLE_COLLECT){r.next=3;break}return r.next=3,v.Z.post("/collect/tracker",[{key:t,payload:a,ts:Date.now(),source:"filemgr"}]);case 3:case"end":return r.stop()}},e)})),m.apply(this,arguments)}function _(e,t){C.useEffect(function(){B(e,t)},[])}function D(e){var t=e.key,a=e.payload;_(t,a)}},19425:function(x,c,u){u.d(c,{D:function(){return v},a:function(){return B}});var F=u(15009),o=u.n(F),l=u(99289),A=u.n(l),C=u(70507);function v(_){return i.apply(this,arguments)}function i(){return i=A()(o()().mark(function _(D){var e;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.Z.post("/api/update",null,{params:{version:D}});case 2:return e=a.sent,a.abrupt("return",e.data);case 4:case"end":return a.stop()}},_)})),i.apply(this,arguments)}function B(_){return m.apply(this,arguments)}function m(){return m=A()(o()().mark(function _(D){var e;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.Z.post("/api/update/lora",null,{params:{version:D}});case 2:return e=a.sent,a.abrupt("return",e.data);case 4:case"end":return a.stop()}},_)})),m.apply(this,arguments)}},85504:function(x,c,u){u.d(c,{_:function(){return l},i:function(){return o}});var F=u(62435),o={info:void 0,tasks:[],setCtx:function(){}},l=F.createContext(o)}}]);
